<html>
     <head>
         <meta name="viewport" content="width=device-width,initial-scale=1.0">
         <title>CPM ELECTION</title>
         
         <link rel="stylesheet" href="/soilhealth.css">
         <link rel="stylesheet" href="/overview.css">
         <link rel="stylesheet" href="/nav.css">
         <script src="/navbar.js" defer></script>
         <script src="/topbtn.js" defer></script>
        <link rel="stylesheet" href="/footer.css">
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        <script src="/soilhealth.js" defer></script>
         <link rel="preconnect" href="https://fonts.googleapis.com">
         <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
         <script src="https://kit.fontawesome.com/01780eab25.js" crossorigin="anonymous"></script>
         <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@500&display=swap" rel="stylesheet"> 
         <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
         <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
         <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
         <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
         <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
         <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
         <link rel="manifest" href="/site.webmanifest">
        </head>
     <body>
      <button onclick="topFunction()" id="myBtn" class="topbtn" title="Go to top"><i class="fa-solid fa-arrow-up"></i></button> 
        
         <section class="header">
            
            <div class="container">

            <nav >
             
              <a href="/" class="logo" style="font-size: 20px;
                font-family: 'Montserrat', sans-serif;
                color: white;text-decoration: none;font-weight: 800;">CPIM KOSHORMOOLA</a>
        
             
                
              <i class="fa-solid fa-bars  fas" onclick="openmenu()"></i>
  

             <div class="navbtn">
             <a  class="hero-btn2 heronew"> Home </a>
             <a class="hero-btn2 heronew"> Product </a>
             <a class="hero-btn2 heronew"> About </a>
             <a class="hero-btn2 heronew"> Contact </a>
             <a class="hero-btn2 heronew"> Subscription </a>
             <a href="/logout" class="hero-btn2"  ><i class="fa-solid fa-user"></i>Logout</a>
             </div>
                
            
                <ul id="sidemenu">
                    <li><a href="#contact" onclick="closemenu()" style="font-size: 13px;"><i class="fa-solid fa-xmark"></i></a></li>
                    <hr>
                    <li><a href="/">Home</a></li>
                    <hr>
                        <li><a href="#about">Product</a></li>
                    <hr>
                        <li><a href="#about">About</a></li>
                        <hr>
                        <li><a href="#contact">Contact</a></li>
                        <hr>
                        <p>
                            Thank you for choosing Telinso. We value your trust and support. Please free to Contact us anytime
                        </p>
                       
                        <li><a href="login" class="login">Log out</a></li>
                        <li><a href="/" class="login join">Subscription</a></li>
                   
                        
                </ul>
                
                
            </nav>
            <div class="icons-header">
              <a href="/"><i class="fa-solid fa-house"></i></a>
              <a href="/savedata"><i class="fa-solid fa-cloud-arrow-up"></i></a>
                <a href="/analysis"><i class="fa-solid fa-chart-simple"></i></a>
                <a href="/farmerassist"><i class="fa-solid fa-handshake-angle"></i></a>
                <a href="/weather"><i class="fa-solid fa-cloud-bolt"></i></a>
                <a href="/crop"><i class="fa-solid fa-wheat-awn"></i></a>
          </div>
             </div>
         </section>
         <section class="overview" >
             
            <div class="row">
               <div class="overview-col">
                   <h1>VOTERS LIST</h1>
                   <div class="votestat">
                    <a class="total-vote"><h2 ><%= count %></h2></a>
                    <a class="vote-complete"><h2 ><%= count1 %></h2></a>
                    <a class="vote-incomplete"><h2 ><%= count2 %></h2></a>
                   </div>
               </div>
                 
           </div>
           
           
          
            
        </div>
        

         
         
         
       </section>
       
         
           <section class="contact">
          
                   <gmp-map
           id="marker-click-event-example"
           center="11.8309  ,   75.4372"
           zoom="17"
           map-id="TELINSO_MAP_ID"
         >
         <% soildatas.forEach((row,index) => { %>
           <gmp-advanced-marker
             position="<%= row.coordinates %>"
             title="<%= row.name %> "
             
             gmp-clickable
           ></gmp-advanced-marker>
           <% })  %>
           <gmp-advanced-marker
            id="current-location"
            position = "0,0"
            title="current Location"

            gmp-clickable
           ></gmp-advanced-marker>
           
         </gmp-map>
         <button class="overview-btn " ><i class="fa-solid fa-location-crosshairs"></i><span>Current Location</span></button>
         

            <div>
              <input type="text" id="myInput" onkeyup="searchData()" placeholder="&#128269; Search for Name , House name , Serial No" title="Type in a name">
            </div>
           
               
            <div class="contact-row" >
              <p> No of voters <%= count %></p>
                <% soildatas.forEach((row,index) => { %>
               
                        <div class="data <%= row.votestatus %>" id="myUL">
                          <div class="soilname-date">
                          <p class="name-search"><span><%= row.votername %></span></p>
                            <p id="serial-search" class="serial-search" ><span><%= row.serialno %></span></p>
                            </div>
                            <button class="Showmore" onclick="Showmore('<%= index %>')">Show more <strong>&#x25BD; </strong></button>
                            <div class="soildata" style="display: none;" id="<%= index %>">
                            
                           
                            <p>House no :<%= row.houseno %> </p>
                            <p id="house-search" class="house-search">House name : <%= row.housename %> </p>
                            <p>ID Card No : <%= row.idno %></p>
                            <p>Booth no : <%= row.boothno %></p>
                          
                          
                            </div>
                           
                            
                            <div class="feature-archive">
                           
                            <a href="/archive3/<%= row._id %>"><i class="fa-solid fa-fingerprint"></i></a>
                            <a href="/voteredit3/<%= row._id %>"><i class="fa-solid fa-pen-to-square"></i></a>
                            <a href="/alert/<%= row._id %>"><i class="fa-solid fa-trash"></i></a>
                            
                            </div>
                            
                           
                         
                        </div>
                        
                        <% })  %>
              
                   </div>
                
                   
           
       </section>

       <section class="footer">
          
        <div class="row">
           
                <div class="footer-col" >
                    <p>Soil Analysis</p>
                    <p>Visualization</p>
                    <p>Farmer Assist</p>
                    <p>Weather Forecast</p>
                  
                        </div>
                        <hr>
                <div class="footer-col"  >
                      <p>Data Analytics</p>
                      <p>Cloud computing</p>
                      <p>Internet of things</p>
                      <p>Artificial intelligence</p>
                           
                                    </div>
                                    <hr>
                <div class="footer-col"  >
                   <p>Empowernment</p>
                   <p>Innovation</p>
                   <p>Possibilities</p>
                   <p>Collaboration</p>
                    
                </div>
            
            <hr>
           
            <div class="footer-col"  >
                
                
                <p>Home</p>
                <p>Product</p>
                <p>About</p>
                <p>Contact</p>
            </div>
            <hr>
         </div>
            <div class="footer-col" style="text-align: center;" >     
                   <p>
                    Telinso is an IoT-based solution that provides soil health data to farmers and agriculture enthusiasts. It consists of a comprehensive suite of software and hardware that can measure and monitor soil conditions and nutrients, such as pH, moisture, temperature, nitrogen, phosphorus, potassium, and more. By using Telinso, you can access real-time and accurate information about your soil health, and get customized recommendations on how to improve your crop productivity and soil quality. Telinso is a user-friendly, cost-effective, and scalable system that can help you optimize your farming practices and achieve sustainable agriculture. Learn more about Telinso and how it can benefit you. Contact us today
                </p>
            </div>
            <div class="footer-col" style="text-align: center;" >     
                <p>
                    <i class="fa-brands fa-instagram"></i><i class="fa-brands fa-linkedin"></i><i class="fa-brands fa-square-facebook"></i><i class="fa-brands fa-square-x-twitter"></i>
                   <br>
                   <p > 	&copy; TEAM TELINSO</p>
                </p>
            </div>
   </section>
   <script
   src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDn4lHzl_n5h7vQOz1jthHgTw-geOT5LIA&callback=initMap&libraries=marker&v=beta"
   defer></script>
    <script>
      function searchData() {
          
        var elements = document.getElementsByClassName("serial-search");
          var elements2 = document.getElementsByClassName("name-search");
          var elements3 = document.getElementsByClassName("house-search");

         
          for (var i = 0; i < elements.length; i++) {
              
              var textContent = elements[i].textContent.toLowerCase();
              var textContent2 = elements2[i].textContent.toLowerCase();
              var textContent3 = elements3[i].textContent.toLowerCase();
              if (textContent.includes(input)||textContent2.includes(input)||textContent3.includes(input)) {
                  
                  elements[i].parentElement.parentElement.style.display = "flex";
              } else {
                  
                  elements[i].parentElement.parentElement.style.display = "none";
              }
          }
      }
    function Showmore(id){

      const showdata = document.getElementById(id);
      if (showdata.style.display === 'none') {
        showdata.style.display = 'grid';
        showdata.previousElementSibling.innerHTML="Show less <strong>&#x25B3;</strong>";
        
    } else {
        showdata.style.display = 'none';
        showdata.previousElementSibling.innerHTML="Show more <stron>&#x25BD;</strong>";
    }
     
      
       

    }
     
      function showCurrentLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;

          const marker = document.createElement("gmp-advanced-marker");
          marker.setAttribute("position", `${lat},${lng}`);
          marker.setAttribute("title", "Current Location");
          document.getElementById("marker-click-event-example").appendChild(marker);
        },
        () => {
          alert("Error: The Geolocation service failed.");
        }
      );
    } else {
      alert("Error: Your browser doesn't support geolocation.");
    }
  }
  var xValues = ["voted","Not voted"];
  
    var yValues = [`<%= count1 %>`, `<%= count2 %>`];
    var barColors = ["green", "red",];
    
   
    new Chart("doughChart", {
    type: "doughnut",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        legend: {display: false},
        title: {
          display: true,
          text: "Visualization of Soil Sample - Doughnut Graph"
        }
      }
    });
  

    </script>

         </body>
</html>